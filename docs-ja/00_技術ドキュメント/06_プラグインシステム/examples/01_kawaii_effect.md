# ã‹ã‚ã„ã„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³å®Ÿè£…ä¾‹

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€EDVãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ç”¨ã—ã¦å®Ÿè£…ã•ã‚ŒãŸã€Œã‹ã‚ã„ã„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®æ§‹é€ ã¨ä½¿ç”¨æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

**æœ€çµ‚æ›´æ–°æ—¥: 2025å¹´4æœˆ1æ—¥ 09:09:32**

## æ¦‚è¦

ã€Œã‹ã‚ã„ã„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ã€ç”»åƒã‚„å‹•ç”»ã«ãƒ‘ã‚¹ãƒ†ãƒ«ã‚«ãƒ©ãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚„ãƒãƒ¼ãƒˆã®ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‚’é©ç”¨ã™ã‚‹ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚µãƒ³ãƒ—ãƒ«å®Ÿè£…ã§ã™ã€‚ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯EDVãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã®åŸºæœ¬çš„ãªä½¿ã„æ–¹ã‚’ç¤ºã™ã¨åŒæ™‚ã«ã€å®Ÿç”¨çš„ãªã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’æä¾›ã—ã¾ã™ã€‚

```mermaid
graph TD
    KawaiiEffect[ã‹ã‚ã„ã„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³] --> EnhancePink[ãƒ”ãƒ³ã‚¯å¼·èª¿]
    KawaiiEffect --> ApplyPastel[ãƒ‘ã‚¹ãƒ†ãƒ«åŒ–]
    KawaiiEffect --> AddHearts[ãƒãƒ¼ãƒˆè¿½åŠ ]
    
    EnhancePink --> PinkPixels[ãƒ”ã‚¯ã‚»ãƒ«å‡¦ç†]
    ApplyPastel --> ColorAdjustment[è‰²èª¿æ•´]
    AddHearts --> HeartPattern[ãƒãƒ¼ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ç”Ÿæˆ]
    AddHearts --> Overlay[ç”»åƒã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤]
```

## æ©Ÿèƒ½

ã€Œã‹ã‚ã„ã„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ï¼š

1. **ãƒ”ãƒ³ã‚¯å¼·èª¿** - ç”»åƒå†…ã®ãƒ”ãƒ³ã‚¯è‰²ã®è¦ç´ ã‚’å¼·èª¿ã—ã¾ã™
2. **ãƒ‘ã‚¹ãƒ†ãƒ«åŒ–** - ç”»åƒå…¨ä½“ã‚’ãƒ‘ã‚¹ãƒ†ãƒ«ã‚«ãƒ©ãƒ¼ãƒˆãƒ¼ãƒ³ã«å¤‰æ›ã—ã¾ã™
3. **ãƒãƒ¼ãƒˆè¿½åŠ ** - ãƒ©ãƒ³ãƒ€ãƒ ãªä½ç½®ã«å¯æ„›ã„ãƒãƒ¼ãƒˆã‚’ç”»åƒã«è¿½åŠ ã—ã¾ã™

## è¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã¯ä»¥ä¸‹ã®è¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ï¼š

| è¨­å®šå | ã‚¿ã‚¤ãƒ— | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ | èª¬æ˜ |
|--------|--------|--------------|------|
| `pink_intensity` | float | 0.5 | ãƒ”ãƒ³ã‚¯å¼·èª¿ã®å¼·ã•ï¼ˆ0.0ã€œ1.0ï¼‰ |
| `add_hearts` | bool | true | ãƒãƒ¼ãƒˆã‚’è¿½åŠ ã™ã‚‹ã‹ã©ã†ã‹ |
| `pastel_level` | float | 0.7 | ãƒ‘ã‚¹ãƒ†ãƒ«åŒ–ã®å¼·ã•ï¼ˆ0.0ã€œ1.0ï¼‰ |

## å®Ÿè£…è©³ç´°

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®åŸºæœ¬æ§‹é€ ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š

```rust
pub struct KawaiiEffectPlugin {
    // ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
    metadata: PluginMetadata,
    // ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®æ©Ÿèƒ½
    capabilities: PluginCapabilities,
    // ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è¨­å®š
    settings: Mutex<HashMap<String, String>>,
    // ãƒ›ã‚¹ãƒˆã¸ã®å‚ç…§
    host: Option<Arc<dyn Host>>,
    // ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®åˆæœŸåŒ–çŠ¶æ…‹
    initialized: bool,
}
```

### ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®è¨­å®š

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®åˆæœŸåŒ–ã§ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®šã—ã¾ã™ï¼š

```rust
let metadata = PluginMetadata {
    id: "com.example.kawaii-effect".to_string(),
    name: "Kawaii Effect".to_string(),
    version: "1.0.0".to_string(),
    author: "Example Developer".to_string(),
    description: "ç”»åƒã‚’ã‹ã‚ã„ãã™ã‚‹ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³".to_string(),
    plugin_type: PluginType::Effect,
    api_version: "1.0".to_string(),
};
```

### ã‚¨ãƒ•ã‚§ã‚¯ãƒˆé©ç”¨ãƒ­ã‚¸ãƒƒã‚¯

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯ã¯ `apply_effect` ãƒ¡ã‚½ãƒƒãƒ‰ã«å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯3ã¤ã®ä¸»è¦ãªã‚¨ãƒ•ã‚§ã‚¯ãƒˆå‡¦ç†ã‚’é©ç”¨ã—ã¾ã™ï¼š

```rust
fn apply_effect(&self, image: &mut Image) -> Result<(), String> {
    if !self.initialized {
        return Err("ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“".to_string());
    }

    // 1. ãƒ”ãƒ³ã‚¯å¼·èª¿
    self.enhance_pink(image);
    
    // 2. ãƒ‘ã‚¹ãƒ†ãƒ«åŒ–
    self.apply_pastel(image);
    
    // 3. ãƒãƒ¼ãƒˆè¿½åŠ ï¼ˆè¨­å®šã§æœ‰åŠ¹ãªå ´åˆï¼‰
    if self.get_setting_as_bool("add_hearts", true) {
        self.add_heart_overlay(image);
    }
    
    Ok(())
}
```

#### ãƒ”ãƒ³ã‚¯å¼·èª¿å‡¦ç†

ãƒ”ãƒ³ã‚¯è‰²ã®è¦ç´ ã‚’å¼·èª¿ã™ã‚‹å‡¦ç†ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ï¼š

```rust
fn enhance_pink(&self, image: &mut Image) {
    let pink_intensity = self.get_setting_as_f32("pink_intensity", 0.5);
    
    for y in 0..image.height() {
        for x in 0..image.width() {
            let pixel = image.get_pixel(x, y);
            
            // ãƒ”ãƒ³ã‚¯è‰²ã®æ¤œå‡ºï¼ˆèµ¤ãŒå¼·ãã€ç·‘ãŒä¸­ç¨‹åº¦ã€é’ãŒä¸­ç¨‹åº¦ä»¥ä¸Šï¼‰
            if pixel.r > 200 && pixel.g > 100 && pixel.g < 180 && pixel.b > 100 && pixel.b < 200 {
                // ãƒ”ãƒ³ã‚¯è‰²ã®å¼·èª¿
                let new_r = u8::min(255, (pixel.r as f32 * (1.0 + pink_intensity * 0.3)) as u8);
                let new_g = u8::max(0, (pixel.g as f32 * (1.0 - pink_intensity * 0.1)) as u8);
                let new_b = u8::min(255, (pixel.b as f32 * (1.0 + pink_intensity * 0.2)) as u8);
                
                image.set_pixel(x, y, Pixel::new(new_r, new_g, new_b, pixel.a));
            }
        }
    }
}
```

#### ãƒ‘ã‚¹ãƒ†ãƒ«åŒ–å‡¦ç†

ç”»åƒã‚’ãƒ‘ã‚¹ãƒ†ãƒ«ã‚«ãƒ©ãƒ¼ã«å¤‰æ›ã™ã‚‹å‡¦ç†ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ï¼š

```rust
fn apply_pastel(&self, image: &mut Image) {
    let pastel_level = self.get_setting_as_f32("pastel_level", 0.7);
    
    for y in 0..image.height() {
        for x in 0..image.width() {
            let pixel = image.get_pixel(x, y);
            
            // ãƒ‘ã‚¹ãƒ†ãƒ«åŒ–ï¼ˆå„è‰²ãƒãƒ£ãƒ³ãƒãƒ«ã‚’æ˜ã‚‹ãã€å½©åº¦ã‚’ä¸‹ã’ã‚‹ï¼‰
            // ãƒ‘ã‚¹ãƒ†ãƒ«ã‚«ãƒ©ãƒ¼ã®æ•°å¼: æ–°è‰² = å…ƒã®è‰² + (255 - å…ƒã®è‰²) * ãƒ‘ã‚¹ãƒ†ãƒ«ãƒ¬ãƒ™ãƒ«
            let new_r = (pixel.r as f32 + (255.0 - pixel.r as f32) * pastel_level) as u8;
            let new_g = (pixel.g as f32 + (255.0 - pixel.g as f32) * pastel_level) as u8;
            let new_b = (pixel.b as f32 + (255.0 - pixel.b as f32) * pastel_level) as u8;
            
            image.set_pixel(x, y, Pixel::new(new_r, new_g, new_b, pixel.a));
        }
    }
}
```

#### ãƒãƒ¼ãƒˆè¿½åŠ å‡¦ç†

ç”»åƒã«ãƒ©ãƒ³ãƒ€ãƒ ãªãƒãƒ¼ãƒˆã‚’è¿½åŠ ã™ã‚‹å‡¦ç†ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ï¼š

```rust
fn add_heart_overlay(&self, image: &mut Image) {
    let width = image.width();
    let height = image.height();
    
    // ç”»åƒã‚µã‚¤ã‚ºã«å¿œã˜ãŸãƒãƒ¼ãƒˆæ•°ã‚’æ±ºå®š
    let heart_count = ((width * height) as f32 / 50000.0).round() as i32;
    let max_heart_size = ((width.min(height) as f32) * 0.05) as i32;
    
    // ãƒ©ãƒ³ãƒ€ãƒ ãªä½ç½®ã«ãƒãƒ¼ãƒˆã‚’æç”»
    let mut rng = rand::thread_rng();
    for _ in 0..heart_count {
        let x = rng.gen_range(0..width) as i32;
        let y = rng.gen_range(0..height) as i32;
        let size = rng.gen_range(max_heart_size / 3..=max_heart_size);
        
        self.draw_heart(image, x, y, size);
    }
}

fn draw_heart(&self, image: &mut Image, center_x: i32, center_y: i32, size: i32) {
    // ãƒãƒ¼ãƒˆå½¢çŠ¶ã®æ•°å¼ã‚’ä½¿ç”¨ã—ã¦æç”»
    // x^2 + (y - (x^2)^(1/3))^2 = 1 ã®ãƒãƒ¼ãƒˆå½¢çŠ¶ã‚’ä½¿ç”¨
    
    let heart_color = Pixel::new(255, 105, 180, 200); // ãƒ”ãƒ³ã‚¯è‰²ï¼ˆåŠé€æ˜ï¼‰
    
    for dy in -size..size {
        for dx in -size..size {
            // ãƒãƒ¼ãƒˆå½¢çŠ¶ã®å†…éƒ¨ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯
            let x = dx as f32 / size as f32;
            let y = dy as f32 / size as f32;
            
            if (x*x + (y - 0.25 * (x*x).powf(1.0/3.0)).powi(2)) < 0.3 {
                let px = center_x + dx;
                let py = center_y + dy;
                
                // ç”»åƒã®ç¯„å›²å†…ã‹ãƒã‚§ãƒƒã‚¯
                if px >= 0 && px < image.width() as i32 && py >= 0 && py < image.height() as i32 {
                    // æ—¢å­˜ã®ãƒ”ã‚¯ã‚»ãƒ«ã¨ãƒ–ãƒ¬ãƒ³ãƒ‰
                    let existing = image.get_pixel(px as u32, py as u32);
                    let blended = blend_pixels(existing, heart_color);
                    image.set_pixel(px as u32, py as u32, blended);
                }
            }
        }
    }
}

// ãƒ”ã‚¯ã‚»ãƒ«ã‚’ã‚¢ãƒ«ãƒ•ã‚¡ãƒ–ãƒ¬ãƒ³ãƒ‰
fn blend_pixels(bg: Pixel, fg: Pixel) -> Pixel {
    let alpha = fg.a as f32 / 255.0;
    let new_r = (bg.r as f32 * (1.0 - alpha) + fg.r as f32 * alpha) as u8;
    let new_g = (bg.g as f32 * (1.0 - alpha) + fg.g as f32 * alpha) as u8;
    let new_b = (bg.b as f32 * (1.0 - alpha) + fg.b as f32 * alpha) as u8;
    
    Pixel::new(new_r, new_g, new_b, bg.a)
}
```

### Plugin ãƒˆãƒ¬ã‚¤ãƒˆã®å®Ÿè£…

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ `Plugin` ãƒˆãƒ¬ã‚¤ãƒˆã‚’å®Ÿè£…ã—ã¦ã€åŸºæœ¬çš„ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ï¼š

```rust
impl Plugin for KawaiiEffectPlugin {
    fn metadata(&self) -> &PluginMetadata {
        &self.metadata
    }

    fn capabilities(&self) -> &PluginCapabilities {
        &self.capabilities
    }

    fn initialize(&mut self, host: Arc<dyn Host>) -> Result<(), String> {
        info!("ğŸŒŸ ã‹ã‚ã„ã„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’åˆæœŸåŒ–ä¸­...");
        self.host = Some(host.clone());
        
        // ãƒ›ã‚¹ãƒˆã‹ã‚‰ä¿å­˜ã•ã‚ŒãŸè¨­å®šã‚’èª­ã¿è¾¼ã‚€
        if let Some(saved_settings) = host.load_plugin_settings(&self.metadata.id) {
            let mut settings = self.settings.lock().unwrap();
            for (key, value) in saved_settings {
                settings.insert(key, value);
            }
        }
        
        self.initialized = true;
        info!("âœ“ ã‹ã‚ã„ã„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®åˆæœŸåŒ–ãŒå®Œäº†ã—ã¾ã—ãŸ");
        Ok(())
    }

    fn shutdown(&mut self) -> Result<(), String> {
        info!("ğŸ’¤ ã‹ã‚ã„ã„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã—ã¾ã™...");
        
        // è¨­å®šã‚’ä¿å­˜
        if let Some(host) = &self.host {
            let settings = self.settings.lock().unwrap();
            host.save_plugin_settings(&self.metadata.id, settings.clone());
        }
        
        self.initialized = false;
        info!("ğŸ‘‹ ã‹ã‚ã„ã„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ãŒå®Œäº†ã—ã¾ã—ãŸ");
        Ok(())
    }

    fn is_initialized(&self) -> bool {
        self.initialized
    }
}
```

### EffectPlugin ãƒˆãƒ¬ã‚¤ãƒˆã®å®Ÿè£…

ã•ã‚‰ã«ã€`EffectPlugin` ãƒˆãƒ¬ã‚¤ãƒˆã‚’å®Ÿè£…ã—ã¦ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ï¼š

```rust
impl EffectPlugin for KawaiiEffectPlugin {
    fn apply_effect(&self, image: &mut Image) -> Result<(), String> {
        // å‰è¿°ã®å®Ÿè£…
    }

    fn get_effect_name(&self) -> String {
        "ã‹ã‚ã„ã„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ".to_string()
    }

    fn get_effect_description(&self) -> String {
        "ç”»åƒã«ãƒ‘ã‚¹ãƒ†ãƒ«ã‚«ãƒ©ãƒ¼ã¨ãƒãƒ¼ãƒˆã‚’è¿½åŠ ã—ã¦ã‹ã‚ã„ãå¤‰èº«ã•ã›ã¾ã™âœ¨".to_string()
    }
}
```

### SettingsAccess ãƒˆãƒ¬ã‚¤ãƒˆã®å®Ÿè£…

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯è¨­å®šã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’æä¾›ã™ã‚‹ãŸã‚ã« `SettingsAccess` ãƒˆãƒ¬ã‚¤ãƒˆã‚‚å®Ÿè£…ã—ã¦ã„ã¾ã™ï¼š

```rust
impl SettingsAccess for KawaiiEffectPlugin {
    fn get_settings(&self) -> HashMap<String, String> {
        self.settings.lock().unwrap().clone()
    }

    fn update_settings(&self, new_settings: HashMap<String, String>) -> Result<(), String> {
        let mut settings = self.settings.lock().unwrap();
        
        // è¨­å®šå€¤ã®æ¤œè¨¼
        for (key, value) in &new_settings {
            if key == "pink_intensity" || key == "pastel_level" {
                if let Ok(level) = value.parse::<f32>() {
                    if level < 0.0 || level > 1.0 {
                        return Err(format!("{}ã®å€¤ã¯0.0ã‹ã‚‰1.0ã®ç¯„å›²ã§æŒ‡å®šã—ã¦ãã ã•ã„", key));
                    }
                } else {
                    return Err(format!("{}ã®å€¤ã¯æ•°å€¤ã§æŒ‡å®šã—ã¦ãã ã•ã„", key));
                }
            }
        }
        
        // è¨­å®šã‚’æ›´æ–°
        for (key, value) in new_settings {
            settings.insert(key, value);
        }
        
        // è¨­å®šã‚’ä¿å­˜
        if let Some(host) = &self.host {
            host.save_plugin_settings(&self.metadata.id, settings.clone());
        }
        
        Ok(())
    }
}
```

### ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ä½œæˆã¨å–å¾—ã®ãŸã‚ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆé–¢æ•°ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ï¼š

```rust
#[no_mangle]
pub extern "C" fn create_plugin() -> Box<dyn Plugin> {
    Box::new(KawaiiEffectPlugin::new())
}
```

## ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ä½¿ç”¨æ–¹æ³•

### ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

1. ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`libkawaii_effect.so`ã€`kawaii_effect.dll`ã€ã¾ãŸã¯ `kawaii_effect.dylib`ï¼‰ã¨ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`plugin.toml`ï¼‰ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ã—ã¾ã™ã€‚
2. EDVã‚’èµ·å‹•ã™ã‚‹ã¨ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒè‡ªå‹•çš„ã«æ¤œå‡ºã•ã‚Œã€èª­ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚

### ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®é©ç”¨

1. EDVã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã§ç”»åƒã‚„å‹•ç”»ã‚’é–‹ãã¾ã™ã€‚
2. ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãƒ‘ãƒãƒ«ã§ã€Œã‹ã‚ã„ã„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã€ã‚’é¸æŠã—ã¾ã™ã€‚
3. å¿…è¦ã«å¿œã˜ã¦è¨­å®šã‚’èª¿æ•´ã—ã¾ã™ã€‚
4. ã€Œé©ç”¨ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’é©ç”¨ã—ã¾ã™ã€‚

## è¨­å®šä¾‹

ä»¥ä¸‹ã¯ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è¨­å®šä¾‹ã§ã™ï¼š

```toml
# å¼·ã„ãƒ”ãƒ³ã‚¯å¼·èª¿ã€ãƒãƒ¼ãƒˆã‚ã‚Šã€å¼·ã„ãƒ‘ã‚¹ãƒ†ãƒ«åŒ–
pink_intensity = "0.8"
add_hearts = "true"
pastel_level = "0.9"
```

```toml
# å¼±ã„ãƒ”ãƒ³ã‚¯å¼·èª¿ã€ãƒãƒ¼ãƒˆãªã—ã€å¼±ã„ãƒ‘ã‚¹ãƒ†ãƒ«åŒ–
pink_intensity = "0.3"
add_hearts = "false"
pastel_level = "0.4"
```

## ãƒ†ã‚¹ãƒˆ

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã¯ä»¥ä¸‹ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãŒå«ã¾ã‚Œã¦ã„ã¾ã™ï¼š

```rust
#[cfg(test)]
mod tests {
    use super::*;
    
    #[test]
    fn test_plugin_metadata() {
        let plugin = KawaiiEffectPlugin::new();
        assert_eq!(plugin.metadata().id, "com.example.kawaii-effect");
        assert_eq!(plugin.metadata().plugin_type, PluginType::Effect);
    }
    
    #[test]
    fn test_plugin_capabilities() {
        let plugin = KawaiiEffectPlugin::new();
        assert!(plugin.capabilities().thread_safe);
        assert!(!plugin.capabilities().gpu_accelerated);
    }
    
    #[test]
    fn test_settings_access() {
        let plugin = KawaiiEffectPlugin::new();
        
        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’ç¢ºèª
        let settings = plugin.get_settings();
        assert_eq!(settings.get("pink_intensity"), Some(&"0.5".to_string()));
        assert_eq!(settings.get("add_hearts"), Some(&"true".to_string()));
        assert_eq!(settings.get("pastel_level"), Some(&"0.7".to_string()));
        
        // è¨­å®šã‚’æ›´æ–°
        let mut new_settings = HashMap::new();
        new_settings.insert("pink_intensity".to_string(), "0.8".to_string());
        new_settings.insert("add_hearts".to_string(), "false".to_string());
        plugin.update_settings(new_settings).unwrap();
        
        // æ›´æ–°ã•ã‚ŒãŸè¨­å®šã‚’ç¢ºèª
        let updated_settings = plugin.get_settings();
        assert_eq!(updated_settings.get("pink_intensity"), Some(&"0.8".to_string()));
        assert_eq!(updated_settings.get("add_hearts"), Some(&"false".to_string()));
        assert_eq!(updated_settings.get("pastel_level"), Some(&"0.7".to_string()));
    }
}
```

## ã¾ã¨ã‚

ã€Œã‹ã‚ã„ã„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ã€EDVãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ç”¨ã—ã¦é«˜å“è³ªãªãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’å®Ÿè£…ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚³ãƒ¼ãƒ‰ã¯ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’é–‹ç™ºã™ã‚‹ãŸã‚ã®å‚è€ƒã¨ã—ã¦æ´»ç”¨ã§ãã¾ã™ã€‚

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã®è©³ç´°ã‚„ãã®ä»–ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¿ã‚¤ãƒ—ã®å®Ÿè£…ã«ã¤ã„ã¦ã¯ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³é–‹ç™ºã‚¬ã‚¤ãƒ‰ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚ 